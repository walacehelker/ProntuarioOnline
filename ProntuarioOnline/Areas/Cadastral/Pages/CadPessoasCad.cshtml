@page "{id?}"
@model ProntuarioOnline.Areas.Cadastral.Pages.CadPessoas.CadPessoasCad
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    Layout = "_Layout";
}

<style>
    .form-label {
        font-weight: 500;
        margin-bottom: 0.3rem;
    }

    .form-control,
    .form-check {
        margin-bottom: 1rem; /* espaço entre campos */
    }

    h5 {
        margin-top: 2rem;
        margin-bottom: 1rem;
        font-weight: 600;
        color: #0d6efd; /* azul bootstrap */
        border-bottom: 1px solid #dee2e6;
        padding-bottom: 0.3rem;
    }

    .card-body {
        padding: 2rem;
    }

    .form-control {
        padding: 0.6rem 1rem;
        font-size: 1rem;
    }

    .form-check {
        margin-bottom: 0.75rem;
    }

    .btn {
        padding: 0.6rem 1.2rem;
        font-size: 1rem;
    }
</style>

<div class="container-fluid mt-4">
    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h4 class="mb-0">Cadastro de Pessoa</h4>
        </div>
        <div class="card-body">
            <form method="post">
                <input type="hidden" asp-for="EntityVm.Id" />
                <!-- Dados pessoais -->
                <div class="mb-3">
                    <label asp-for="EntityVm.Nome" class="form-label"></label>
                    <input asp-for="EntityVm.Nome" class="form-control" />
                    <span asp-validation-for="EntityVm.Nome" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="EntityVm.NomeSocial" class="form-label"></label>
                    <input asp-for="EntityVm.NomeSocial" class="form-control" />
                    <span asp-validation-for="EntityVm.NomeSocial" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="EntityVm.DataNascimento" class="form-label"></label>
                    <input asp-for="EntityVm.DataNascimento"class="form-control"type="text"value="@Model.EntityVm.DataNascimento?.ToString("dd/MM/yyyy")" />
                    <span asp-validation-for="EntityVm.DataNascimento" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="EntityVm.Cpf" class="form-label"></label>
                    <input asp-for="EntityVm.Cpf" class="form-control" />
                    <span asp-validation-for="EntityVm.Cpf" class="text-danger"></span>
                </div>

                <!-- Endereço -->
                <h5 class="mt-4">Endereço</h5>
                <div class="mb-3">
                    <label asp-for="EntityVm.Rua" class="form-label"></label>
                    <input asp-for="EntityVm.Rua" class="form-control" />
                    <span asp-validation-for="EntityVm.Rua" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="EntityVm.Numero" class="form-label"></label>
                    <input asp-for="EntityVm.Numero" class="form-control" />
                    <span asp-validation-for="EntityVm.Numero" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="EntityVm.Bairro" class="form-label"></label>
                    <input asp-for="EntityVm.Bairro" class="form-control" />
                    <span asp-validation-for="EntityVm.Bairro" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="EntityVm.Cidade" class="form-label"></label>
                    <input asp-for="EntityVm.Cidade" class="form-control" />
                    <span asp-validation-for="EntityVm.Cidade" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="EntityVm.Estado" class="form-label"></label>
                    <input asp-for="EntityVm.Estado" class="form-control" />
                    <span asp-validation-for="EntityVm.Estado" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="EntityVm.Cep" class="form-label"></label>
                    <input asp-for="EntityVm.Cep" class="form-control" />
                    <span asp-validation-for="EntityVm.Cep" class="text-danger"></span>
                </div>

                <!-- Contato -->
                <h5 class="mt-4">Contato</h5>
                <div class="mb-3">
                    <label asp-for="EntityVm.Telefone" class="form-label"></label>
                    <input asp-for="EntityVm.Telefone" class="form-control" />
                    <span asp-validation-for="EntityVm.Telefone" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="EntityVm.Email" class="form-label"></label>
                    <input asp-for="EntityVm.Email" class="form-control" />
                    <span asp-validation-for="EntityVm.Email" class="text-danger"></span>
                </div>

                <!-- Histórico -->
                <h5 class="mt-4">Histórico</h5>
                <div class="mb-3">
                    <label asp-for="EntityVm.Queixa" class="form-label"></label>
                    <textarea asp-for="EntityVm.Queixa" class="form-control"></textarea>
                </div>

                <div class="mb-3">
                    <label asp-for="EntityVm.DiagnosticoClinico" class="form-label"></label>
                    <textarea asp-for="EntityVm.DiagnosticoClinico" class="form-control"></textarea>
                </div>

                <div class="mb-3">
                    <label asp-for="EntityVm.AntecedentesPatologicos" class="form-label"></label>
                    <textarea asp-for="EntityVm.AntecedentesPatologicos" class="form-control"></textarea>
                </div>

                <div class="mb-3">
                    <label asp-for="EntityVm.AntecedentesFamiliares" class="form-label"></label>
                    <textarea asp-for="EntityVm.AntecedentesFamiliares" class="form-control"></textarea>
                </div>

                <!-- Tratamentos Estéticos -->
                <h5 class="mt-4">Tratamentos Estéticos</h5>

                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.PossuiTratamentoEsteticoAnterior"
                           value="true" class="form-check-input" id="tratamentoSim"
                           onchange="toggleTratamentoEstetico()" />
                    <label class="form-check-label" for="tratamentoSim">Sim</label>
                </div>

                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.PossuiTratamentoEsteticoAnterior"
                           value="false" class="form-check-input" id="tratamentoNao"
                           onchange="toggleTratamentoEstetico()" />
                    <label class="form-check-label" for="tratamentoNao">Não</label>
                </div>

                <!-- Campos relacionados -->
                <div id="camposTratamentoEstetico" style="display:none;">
                    <div class="form-check mt-3">
                        <input asp-for="EntityVm.ToxinixaBotulinica" class="form-check-input" type="checkbox" />
                        <label asp-for="EntityVm.ToxinixaBotulinica" class="form-check-label"></label>
                    </div>
                    <div class="form-check">
                        <input asp-for="EntityVm.Preenchedores" class="form-check-input" type="checkbox" />
                        <label asp-for="EntityVm.Preenchedores" class="form-check-label"></label>
                    </div>
                    <div class="mb-3">
                        <label asp-for="EntityVm.TratamentoEsteticoAnterior" class="form-label"></label>
                        <textarea asp-for="EntityVm.TratamentoEsteticoAnterior" class="form-control"></textarea>
                    </div>
                    <div class="mb-3">
                        <label asp-for="EntityVm.InformacoesSobreAplicacao" class="form-label"></label>
                        <textarea asp-for="EntityVm.InformacoesSobreAplicacao" class="form-control"></textarea>
                    </div>
                    <div class="mb-3">
                        <label asp-for="EntityVm.InformacoesPosAplicacao" class="form-label"></label>
                        <textarea asp-for="EntityVm.InformacoesPosAplicacao" class="form-control"></textarea>
                    </div>
                </div>

                <!-- Medicamentos -->
                <h5 class="mt-4">Medicamentos</h5>

                <!-- Sim / Não -->
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.Medicamentos"
                           value="true" class="form-check-input" id="medicamentosSim"
                           onchange="toggleMedicamentos()" />
                    <label class="form-check-label" for="medicamentosSim">Sim</label>
                </div>
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.Medicamentos"
                           value="false" class="form-check-input" id="medicamentosNao"
                           onchange="toggleMedicamentos()" />
                    <label class="form-check-label" for="medicamentosNao">Não</label>
                </div>

                <!-- Campos relacionados -->
                <div id="camposMedicamentos" style="display:none;">
                    <div class="form-check mt-3">
                        <input asp-for="EntityVm.Medicamentos" class="form-check-input" type="checkbox" />
                        <label asp-for="EntityVm.Medicamentos" class="form-check-label"></label>
                    </div>
                    <div class="form-check">
                        <input asp-for="EntityVm.AntiInfamatorio" class="form-check-input" type="checkbox" />
                        <label asp-for="EntityVm.AntiInfamatorio" class="form-check-label"></label>
                    </div>
                    <div class="form-check">
                        <input asp-for="EntityVm.Analgesico" class="form-check-input" type="checkbox" />
                        <label asp-for="EntityVm.Analgesico" class="form-check-label"></label>
                    </div>
                    <div class="form-check">
                        <input asp-for="EntityVm.RelaxanteMuscular" class="form-check-input" type="checkbox" />
                        <label asp-for="EntityVm.RelaxanteMuscular" class="form-check-label"></label>
                    </div>
                    <div class="form-check">
                        <input asp-for="EntityVm.Antibiotico" class="form-check-input" type="checkbox" />
                        <label asp-for="EntityVm.Antibiotico" class="form-check-label"></label>
                    </div>
                    <div class="form-check">
                        <input asp-for="EntityVm.Aminoglicosideos" class="form-check-input" type="checkbox" />
                        <label asp-for="EntityVm.Aminoglicosideos" class="form-check-label"></label>
                    </div>
                    <div class="form-check">
                        <input asp-for="EntityVm.Penicilaminas" class="form-check-input" type="checkbox" />
                        <label asp-for="EntityVm.Penicilaminas" class="form-check-label"></label>
                    </div>
                    <div class="form-check">
                        <input asp-for="EntityVm.Quinolonas" class="form-check-input" type="checkbox" />
                        <label asp-for="EntityVm.Quinolonas" class="form-check-label"></label>
                    </div>
                    <div class="form-check">
                        <input asp-for="EntityVm.RepositoresHormonais" class="form-check-input" type="checkbox" />
                        <label asp-for="EntityVm.RepositoresHormonais" class="form-check-label"></label>
                    </div>
                    <div class="form-check">
                        <input asp-for="EntityVm.Succinilcolina" class="form-check-input" type="checkbox" />
                        <label asp-for="EntityVm.Succinilcolina" class="form-check-label"></label>
                    </div>
                    <div class="form-check">
                        <input asp-for="EntityVm.BloqueadorCanalCalcio" class="form-check-input" type="checkbox" />
                        <label asp-for="EntityVm.BloqueadorCanalCalcio" class="form-check-label"></label>
                    </div>
                    <div class="mb-3">
                        <label asp-for="EntityVm.OutrosMedicamentos" class="form-label"></label>
                        <textarea asp-for="EntityVm.OutrosMedicamentos" class="form-control"></textarea>
                    </div>
                </div>

                <!-- Hábitos e Condições -->
                <h5 class="mt-4">Hábitos e Condições</h5>
                <div class="form-check">
                    <input asp-for="EntityVm.TomaSol" class="form-check-input" type="checkbox" />
                    <label asp-for="EntityVm.TomaSol" class="form-check-label"></label>
                </div>

                <h5 class="mt-4">Pratica de Esportes</h5>
                <!-- Sim / Não -->
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.PraticaEsporte"
                           value="true" class="form-check-input" id="praticaEsporteSim"
                           onchange="togglePraticaEsporte()" />
                    <label class="form-check-label" for="praticaEsporteSim">Sim</label>
                </div>
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.PraticaEsporte"
                           value="false" class="form-check-input" id="praticaEsporteNao"
                           onchange="togglePraticaEsporte()" />
                    <label class="form-check-label" for="praticaEsporteNao">Não</label>
                </div>

                <!-- Campo relacionado -->
                <div id="campoEsportes" style="display:none;" class="mt-3">
                    <div class="mb-3">
                        <label asp-for="EntityVm.Esportes" class="form-label"></label>
                        <textarea asp-for="EntityVm.Esportes" class="form-control"></textarea>
                    </div>
                </div>

                <h5 class="mt-4">Antecedentes Alérgicos</h5>

                <!-- Sim / Não -->
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.AntecedentesAlergicos"
                           value="true" class="form-check-input" id="alergicosSim"
                           onchange="toggleAlergicos()" />
                    <label class="form-check-label" for="alergicosSim">Sim</label>
                </div>
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.AntecedentesAlergicos"
                           value="false" class="form-check-input" id="alergicosNao"
                           onchange="toggleAlergicos()" />
                    <label class="form-check-label" for="alergicosNao">Não</label>
                </div>

                <!-- Campo relacionado -->
                <div id="campoAlergias" style="display:none;" class="mt-3">
                    <div class="mb-3">
                        <label asp-for="EntityVm.Alergias" class="form-label"></label>
                        <textarea asp-for="EntityVm.Alergias" class="form-control"></textarea>
                    </div>
                </div>

                <h5 class="mt-4">Distúbios Emocionais</h5>

                <div class="form-check">
                    <input asp-for="EntityVm.Stresse" class="form-check-input" type="checkbox" />
                    <label asp-for="EntityVm.Stresse" class="form-check-label"></label>
                </div>
                <div class="form-check">
                    <input asp-for="EntityVm.Ansiedade" class="form-check-input" type="checkbox" />
                    <label asp-for="EntityVm.Ansiedade" class="form-check-label"></label>
                </div>
                <div class="mb-3">
                    <label asp-for="EntityVm.OutrosDisturbiosEmocionais" class="form-label"></label>
                    <textarea asp-for="EntityVm.OutrosDisturbiosEmocionais" class="form-control"></textarea>
                </div>

                <h5 class="mt-4">Tratamento Ortomolecular</h5>
              
                <!-- Sim / Não -->
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.TratamentoOrtomolecular"
                           value="true" class="form-check-input" id="ortomolecularSim"
                           onchange="toggleOrtomolecular()" />
                    <label class="form-check-label" for="ortomolecularSim">Sim</label>
                </div>
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.TratamentoOrtomolecular"
                           value="false" class="form-check-input" id="ortomolecularNao"
                           onchange="toggleOrtomolecular()" />
                    <label class="form-check-label" for="ortomolecularNao">Não</label>
                </div>

                <!-- Campo relacionado -->
                <div id="campoOrtomolecular" style="display:none;" class="mt-3">
                    <div class="mb-3">
                        <label asp-for="EntityVm.DescricaoTratamentosortomolecular" class="form-label"></label>
                        <textarea asp-for="EntityVm.DescricaoTratamentosortomolecular" class="form-control"></textarea>
                    </div>
                </div>

                <h5 class="mt-4">Cuidados Estéticos</h5>

                <!-- Sim / Não -->
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.CuidadosEstéticos"
                           value="true" class="form-check-input" id="cuidadosEsteticosSim"
                           onchange="toggleCuidadosEsteticos()" />
                    <label class="form-check-label" for="cuidadosEsteticosSim">Sim</label>
                </div>
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.CuidadosEstéticos"
                           value="false" class="form-check-input" id="cuidadosEsteticosNao"
                           onchange="toggleCuidadosEsteticos()" />
                    <label class="form-check-label" for="cuidadosEsteticosNao">Não</label>
                </div>

                <!-- Campo relacionado -->
                <div id="campoCuidadosEsteticos" style="display:none;" class="mt-3">
                    <div class="mb-3">
                        <label asp-for="EntityVm.DescricaoCuidadosEsteticos" class="form-label"></label>
                        <textarea asp-for="EntityVm.DescricaoCuidadosEsteticos" class="form-control"></textarea>
                    </div>
                </div>

                <h5 class="mt-4">Tratamento Médico</h5>

                <!-- Sim / Não -->
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.TratamentoMedico"
                           value="true" class="form-check-input" id="tratamentoMedicoSim"
                           onchange="toggleTratamentoMedico()" />
                    <label class="form-check-label" for="tratamentoMedicoSim">Sim</label>
                </div>
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.TratamentoMedico"
                           value="false" class="form-check-input" id="tratamentoMedicoNao"
                           onchange="toggleTratamentoMedico()" />
                    <label class="form-check-label" for="tratamentoMedicoNao">Não</label>
                </div>

                <!-- Campo relacionado -->
                <div id="campoTratamentoMedico" style="display:none;" class="mt-3">
                    <div class="mb-3">
                        <label asp-for="EntityVm.DescricaoTratamentoMedico" class="form-label"></label>
                        <textarea asp-for="EntityVm.DescricaoTratamentoMedico" class="form-control"></textarea>
                    </div>
                </div>

                <h5 class="mt-4">Uso de Ácido na Pele</h5>

                <!-- Sim / Não -->
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.UsoAcidoPele"
                           value="true" class="form-check-input" id="usoAcidoSim"
                           onchange="toggleUsoAcido()" />
                    <label class="form-check-label" for="usoAcidoSim">Sim</label>
                </div>
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.UsoAcidoPele"
                           value="false" class="form-check-input" id="usoAcidoNao"
                           onchange="toggleUsoAcido()" />
                    <label class="form-check-label" for="usoAcidoNao">Não</label>
                </div>

                <!-- Campo relacionado -->
                <div id="campoUsoAcido" style="display:none;" class="mt-3">
                    <div class="mb-3">
                        <label asp-for="EntityVm.QualAcido" class="form-label"></label>
                        <textarea asp-for="EntityVm.QualAcido" class="form-control"></textarea>
                    </div>
                </div>

                <h5 class="mt-4">Problema Cardíaco</h5>

                <!-- Sim / Não -->
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.ProblemaCardiaco"
                           value="true" class="form-check-input" id="problemaCardiacoSim"
                           onchange="toggleProblemaCardiaco()" />
                    <label class="form-check-label" for="problemaCardiacoSim">Sim</label>
                </div>
                <div class="form-check form-check-inline">
                    <input type="radio" asp-for="EntityVm.ProblemaCardiaco"
                           value="false" class="form-check-input" id="problemaCardiacoNao"
                           onchange="toggleProblemaCardiaco()" />
                    <label class="form-check-label" for="problemaCardiacoNao">Não</label>
                </div>

                <!-- Campo relacionado -->
                <div id="campoProblemaCardiaco" style="display:none;" class="mt-3">
                    <div class="mb-3">
                        <label asp-for="EntityVm.QualProblemaCardiaco" class="form-label"></label>
                        <textarea asp-for="EntityVm.QualProblemaCardiaco" class="form-control"></textarea>
                    </div>
                </div>

                <h5 class="mt-4">Geral</h5>

                <div class="form-check">
                    <input asp-for="EntityVm.IntoleranciaLactose" class="form-check-input" type="checkbox" />
                    <label asp-for="EntityVm.IntoleranciaLactose" class="form-check-label"></label>
                </div>
                <div class="form-check">
                    <input asp-for="EntityVm.Diabetes" class="form-check-input" type="checkbox" />
                    <label asp-for="EntityVm.Diabetes" class="form-check-label"></label>
                </div>
                <div class="form-check">
                    <input asp-for="EntityVm.AlergiaOvo" class="form-check-input" type="checkbox" />
                    <label asp-for="EntityVm.AlergiaOvo" class="form-check-label"></label>
                </div>
                <div class="form-check">
                    <input asp-for="EntityVm.Fumante" class="form-check-input" type="checkbox" />
                    <label asp-for="EntityVm.Fumante" class="form-check-label"></label>
                </div>
                <div class="form-check">
                    <input asp-for="EntityVm.GestanteOuAmamentando" class="form-check-input" type="checkbox" />
                    <label asp-for="EntityVm.GestanteOuAmamentando" class="form-check-label"></label>
                </div>
                <div class="mb-3">
                    <label asp-for="EntityVm.InformacoesComplementares" class="form-label"></label>
                    <textarea asp-for="EntityVm.InformacoesComplementares" class="form-control"></textarea>
                </div>

                <!-- Botões -->
                <button type="submit" class="btn btn-success">
                    <i class="bi bi-save"></i> Salvar
                </button>
                <a asp-page="CadPessoas" class="btn btn-secondary">Voltar</a>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        // $(document).ready(function(){
        //     $('#DataNascimento').mask('00/00/0000');
        // });

        $(function () {
            $('#EntityVm_DataNascimento').mask('00/00/0000');
            $('#EntityVm_Cpf').mask('000.000.000-00');
            $('#EntityVm_Telefone').mask('(00) 00000-0000');
            $('#EntityVm_Cep').mask('00000-000');
        });


        function toggleTratamentoEstetico() {
            const sim = document.getElementById("tratamentoSim");
            const campos = document.getElementById("camposTratamentoEstetico");

            if (sim.checked) {
                campos.style.display = "block";
            } else {
                campos.style.display = "none";
            }
        }
        
        function toggleMedicamentos() {
            const sim = document.getElementById("medicamentosSim");
            const campos = document.getElementById("camposMedicamentos");

            if (sim.checked) {
                campos.style.display = "block";
            } else {
                campos.style.display = "none";
            }
        }

        function togglePraticaEsporte() {
            const sim = document.getElementById("praticaEsporteSim");
            const campos = document.getElementById("campoEsportes");

            if (sim.checked) {
                campos.style.display = "block";
            } else {
                campos.style.display = "none";
            }
        }        
        
        function toggleAlergicos() {
            const sim = document.getElementById("alergicosSim");
            const campos = document.getElementById("campoAlergias");

            if (sim.checked) {
                campos.style.display = "block";
            } else {
                campos.style.display = "none";
            }
        }

        function toggleOrtomolecular() {
            const sim = document.getElementById("ortomolecularSim");
            const campos = document.getElementById("campoOrtomolecular");

            if (sim.checked) {
                campos.style.display = "block";
            } else {
                campos.style.display = "none";
            }
        }

        function toggleCuidadosEsteticos() {
            const sim = document.getElementById("cuidadosEsteticosSim");
            const campos = document.getElementById("campoCuidadosEsteticos");

            if (sim.checked) {
                campos.style.display = "block";
            } else {
                campos.style.display = "none";
            }
        }

        function toggleTratamentoMedico() {
            const sim = document.getElementById("tratamentoMedicoSim");
            const campos = document.getElementById("campoTratamentoMedico");

            if (sim.checked) {
                campos.style.display = "block";
            } else {
                campos.style.display = "none";
            }
        }

        function toggleUsoAcido() {
            const sim = document.getElementById("usoAcidoSim");
            const campos = document.getElementById("campoUsoAcido");

            if (sim.checked) {
                campos.style.display = "block";
            } else {
                campos.style.display = "none";
            }
        }

        function toggleProblemaCardiaco() {
            const sim = document.getElementById("problemaCardiacoSim");
            const campos = document.getElementById("campoProblemaCardiaco");

            if (sim.checked) {
                campos.style.display = "block";
            } else {
                campos.style.display = "none";
            }
        }



        // Executa no carregamento para manter estado correto
        document.addEventListener("DOMContentLoaded", () => {
            toggleMedicamentos();
            toggleTratamentoEstetico();
            togglePraticaEsporte();
            toggleAlergicos();
            toggleOrtomolecular();
            toggleCuidadosEsteticos();
            toggleTratamentoMedico();
            toggleUsoAcido();
            toggleProblemaCardiaco();
        });

    </script>
}